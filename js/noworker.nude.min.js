(function(){Array.prototype.remove=function(b){var c=this.slice(b+1);this.length=b;return this.push.apply(this,c)};var a=(function(){var e=null,o=null,i=[],l=null,s=null,j=function(){e=document.createElement("canvas");e.style.display="none";var t=document.getElementsByTagName("body")[0];t.appendChild(e);o=e.getContext("2d")},f=function(t){s=document.getElementById(t);e.width=s.width;e.height=s.height;i=[],l=null;o.drawImage(s,0,0)},p=function(){var I=o.getImageData(0,0,e.width,e.height),P=I.data,K=[],z=[],R=[],M=e.width,D=-1,J=-1;var A=function(V,U){D=V;J=U;var u=R.length,x=-1,S=-1;while(u--){var y=R[u],T=y.length;while(T--){if(y[T]==V){x=u}if(y[T]==U){S=u}}}if(x!=-1&&S!=-1&&x==S){return}if(x==-1&&S==-1){R.push([V,U]);return}if(x!=-1&&S==-1){R[x].push(U);return}if(x==-1&&S!=-1){R[S].push(V);return}if(x!=-1&&S!=-1&&x!=S){R[x]=R[x].concat(R[S]);R.remove(S);return}};var w=P.length,M=e.width;for(var N=0,G=1;N<w;N+=4,G++){var H=P[N],O=P[N+1],Q=P[N+2],F=(G>M)?((G%M)-1):G,E=(G>M)?(Math.ceil(G/M)-1):1;if(k(H,O,Q)){K.push({id:G,skin:true,region:0,x:F,y:E,checked:false});var v=-1,B=[G-2,(G-M)-2,G-M-1,(G-M)],t=false;for(var L=0;L<4;L++){var C=B[L];if(K[C]&&K[C].skin){if(K[C].region!=v&&v!=-1&&D!=v&&J!=K[C].region){A(v,K[C].region)}v=K[C].region;t=true}}if(!t){K[G-1].region=z.length;z.push([K[G-1]]);continue}else{if(v>-1){if(!z[v]){z[v]=[]}K[G-1].region=v;z[v].push(K[G-1])}}}else{K.push({id:G,skin:false,region:0,x:F,y:E,checked:false})}}g(z,R);n()},g=function(v,y){var w=y.length,A=[];while(w--){var x=y[w],z=x.length;if(!A[w]){A[w]=[]}while(z--){var u=x[z];A[w]=A[w].concat(v[u]);v[u]=[]}}var t=v.length;while(t--){if(v[t].length>0){A.push(v[t])}}q(A)},q=function(t){var v=t.length;for(var u=0;u<v;u++){if(t[u].length>30){i.push(t[u])}}},n=function(){var v=i.length,t=e.width*e.height,u=0;if(v<3){b(false);return}(function(){var x=false;while(!x){x=true;for(var y=0;y<v-1;y++){if(i[y].length<i[y+1].length){x=false;var w=i[y];i[y]=i[y+1];i[y+1]=w}}}})();while(v--){u+=i[v].length}if((u/t)*100<15){b(false);return}if((i[0].length/u)*100<35&&(i[1].length/u)*100<30&&(i[2].length/u)*100<30){b(false);return}if((i[0].length/u)*100<45){b(false);return}if(i.length>60){b(false);return}b(true)},b=function(t){if(l){l(t)}else{if(t){console.log("the picture contains nudity")}}},h=function(){var v=i.length;for(var y=0;y<v;y++){var A=i[y],x=A.length,w=Math.ceil(Math.random()*255),B=Math.ceil(Math.random()*255),C=Math.ceil(Math.random()*255);for(var u=0;u<x;u++){var t=o.getImageData(A[u].x,A[u].y,1,1),z=t.data;z[0]=w;z[1]=B;z[2]=C;t.data=z;o.putImageData(t,A[u].x,A[u].y)}}},k=function(t,z,D){var A=((t>95)&&(z>40&&z<100)&&(D>20)&&((Math.max(t,z,D)-Math.min(t,z,D))>15)&&(Math.abs(t-z)>15)&&(t>z)&&(t>D)),B=d(t,z,D),E=B[0],u=B[1],y=B[2],C=(((E/u)>1.185)&&(((t*D)/(Math.pow(t+z+D,2)))>0.107)&&(((t*z)/(Math.pow(t+z+D,2)))>0.112)),x=c(t,z,D),w=x[0],F=x[1],v=(w>0&&w<35&&F>0.23&&F<0.68);return(A||C||v)},r=function(x,w,u){x/=255,w/=255,u/=255;var z=0.299*x+0.587*w+0.114*u,v=x-z,t=u-z;return[z,v,t]},m=function(v,u,t){return[Math.acos((0.5*((v-u)+(v-t)))/(Math.sqrt((Math.pow((v-u),2)+((v-t)*(u-t)))))),1-(3*((Math.min(v,u,t))/(v+u+t))),(1/3)*(v+u+t)]},c=function(x,w,t){var v=0,z=Math.max(x,w,t),y=Math.min(x,w,t),u=z-y;if(z==x){v=(w-t)/u}else{if(z==w){v=2+((w-x)/u)}else{v=4+((x-w)/u)}}v=v*60;if(v<0){v=v+360}return[v,1-(3*((Math.min(x,w,t))/(x+w+t))),(1/3)*(x+w+t)]},d=function(w,v,t){var u=w+v+t;return[(w/u),(v/u),(t/u)]};return{init:function(){j()},load:function(t){f(t)},scan:function(t){if(arguments.length>0&&typeof(arguments[0])=="function"){l=t}p()}}})();window.nude=a;a.init()})();